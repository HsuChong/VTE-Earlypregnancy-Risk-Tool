<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Early Pregnancy VTE Risk Calculator</title>

    <!-- Google Translate (hidden, controlled by buttons) -->
    <script>
    function googleTranslateElementInit() {
        new google.translate.TranslateElement(
            { pageLanguage: 'en', autoDisplay: false },
            'google_translate_element'
        );
    }

    function setLanguage(lang) {
        const select = document.querySelector('select.goog-te-combo');
        if (!select) return;
        select.value = lang;
        select.dispatchEvent(new Event('change'));
    }
    </script>
    <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding-bottom: 100px;
        }

        .header {
            text-align: center;
            padding: 30px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .header h1 {
            font-size: 2.3em;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .language-selector {
            margin-top: 15px;
            text-align: center;
        }

        .language-selector button {
            margin: 5px;
            padding: 8px 14px;
            border-radius: 8px;
            border: 1px solid #ccc;
            background: white;
            cursor: pointer;
        }

        .disclaimer {
            background: #fff3cd;
            border: 1px solid #ffeeba;
            color: #856404;
            padding: 12px 15px;
            border-radius: 10px;
            margin: 20px 0;
            font-size: 0.95em;
        }

        .container {
            background: white;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.1);
        }

        .question {
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 12px;
            border-left: 5px solid #667eea;
        }

        .question label {
            display: block;
            font-weight: 500;
            margin-bottom: 10px;
        }

        select {
            padding: 10px;
            border-radius: 8px;
            border: 2px solid #e1e5e9;
            width: 100%;
        }

        .buttons {
            text-align: center;
            margin: 30px 0;
        }

        .calculate-btn {
            padding: 16px 30px;
            font-size: 16px;
            border-radius: 12px;
            border: none;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            cursor: pointer;
        }

        #result {
            display: none;
            margin-top: 30px;
            padding: 30px;
            border-radius: 20px;
            background: #f8f9fa;
            text-align: center;
        }

        #riskScore {
            font-size: 4em;
            font-weight: 800;
        }

        /* Overlays */
        .overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .overlay.show {
            display: flex;
        }

        .popup {
            background: white;
            padding: 30px;
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
            text-align: center;
        }

        textarea {
            width: 100%;
            height: 150px;
            margin-top: 10px;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #ccc;
        }

        .bottom-nav {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            background: white;
            padding: 10px 15px;
            border-radius: 50px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }

        .bottom-nav button {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            font-size: 18px;
        }
    </style>
</head>

<body>

<!-- Required hidden Google element -->
<div id="google_translate_element" style="display:none;"></div>

<div class="header">
    <h1>üè• Early Pregnancy VTE Risk Calculator</h1>

    <div class="language-selector">
        <p><strong>Change language:</strong></p>
        <button onclick="setLanguage('en')">English</button>
        <button onclick="setLanguage('es')">Espa√±ol</button>
        <button onclick="setLanguage('ar')">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</button>
        <button onclick="setLanguage('ur')">ÿßÿ±ÿØŸà</button>
        <button onclick="setLanguage('pl')">Polski</button>
        <button onclick="setLanguage('zh-CN')">‰∏≠Êñá</button>
        <button onclick="setLanguage('fr')">Fran√ßais</button>
    </div>
</div>

<div class="disclaimer">
    DISCLAIMER: This tool provides general information only for women less than 10 weeks pregnant and does not replace medical advice.
    If you have chest pain or breathlessness, call 999 immediately.
</div>

<div class="container">
    <div class="question">
        <label>1. Have you ever had a blood clot in your leg or your lung (VTE) confirmed by a scan?</label>
        <select id="q1"><option value="0">No</option><option value="1">Yes</option></select>
    </div>
    <div class="question">
        <label>2. Is your morning sickness so bad that you can't stand up, or that you can't drink without vomiting?</label>
        <select id="q2"><option value="0">No</option><option value="1">Yes</option></select>
    </div>
    <div class="question">
        <label>3. Is your BMI ‚â• 50 OR your weight ‚â• 18 stone OR ‚â• 118 kg?</label>
        <select id="q3"><option value="0">No</option><option value="1">Yes</option></select>
    </div>
     <div class="question">
        <label>4. Do you have "Anti-thrombin" deficiency? </label>
        <select id="q3"><option value="0">No</option><option value="1">Yes</option></select>
    </div>

    <div class="buttons">
        <button class="calculate-btn" onclick="calculateRisk()">Calculate risk</button>
    </div>

    <div id="result">
        <h3 id="riskScore"></h3>
        <p id="riskText"></p>
    </div>
</div>

<!-- LOW RISK -->
<div id="lowRiskPopup" class="overlay">
    <div class="popup">
        <h3>‚úÖ Low VTE risk</h3>
        <p>No blood thinning medication is required at this stage. You may have other risk factors. 
            Your doctor or midwife will discuss this with you at your booking appointment.</p>
        <button onclick="closeLowRisk()">OK</button>
    </div>
</div>

<!-- FEEDBACK -->
<div id="feedbackPopup" class="overlay">
    <div class="popup">
        <h3>üí¨ Feedback</h3>
        <textarea id="feedbackText"></textarea>
        <br><br>
        <button onclick="submitFeedback()">Send</button>
        <button onclick="closeFeedback()">Close</button>
    </div>
</div>

<div class="bottom-nav">
    <button class="nhs-btn" onclick="launchNHSSelfReferral()" title="Opens NHS Self-Referral Portal">üè•</button>
    <button class="email-btn" onclick="emailGP()" title="Phone your GP about this risk assessment">‚úâÔ∏è</button>
    <button class="feedback-btn-round" onclick="openFeedback()" title="Send feedback to improve tool">üí¨</button>
</div>

<script>
function calculateRisk() {
    const q1 = Number(document.getElementById('q1').value);
    const q2 = Number(document.getElementById('q2').value);
    const q3 = Number(document.getElementById('q3').value);
    const q4 = Number(document.getElementById('q4').value);

    const total = q1 + q2 + q3 + q4;

    const result = document.getElementById('result');
    const riskScore = document.getElementById('riskScore');
    const riskText = document.getElementById('riskText');
    const lowRiskPopup = document.getElementById('lowRiskPopup');

    // reset UI
    result.style.display = 'none';
    lowRiskPopup.classList.remove('show');

    if (total >= 1) {
        riskScore.textContent =
            'You have a higher chance of a blood clot (VTE)';
        riskText.textContent =
            'Please contact your GP as soon as possible to discuss whether blood thinning medication is required. If you are already on blood thinners do not stop them until you have discussed this with your doctor';
        result.style.display = 'block';
        result.scrollIntoView({ behavior: 'smooth' });

    } else {
        lowRiskPopup.classList.add('show');
    }
}

function closeLowRisk() {
    document.getElementById('lowRiskPopup').classList.remove('show');
}

function launchNHSApp() {
    window.open('https://www.nhs.uk/nhs-services/refer-yourself-for-nhs-pregnancy-care/', '_blank');
}

function emailGP() {
    window.location.href =
        'mailto:?subject=Pregnancy VTE assessment';
}

function openFeedback() {
    document.getElementById('feedbackPopup').classList.add('show');
}

function closeFeedback() {
    document.getElementById('feedbackPopup').classList.remove('show');
}

function submitFeedback() {
    const text = document.getElementById('feedbackText').value.trim();
    if (!text) return;

    window.location.href =
        `mailto:?subject=VTE tool feedback&body=${encodeURIComponent(text)}`;

    document.getElementById('feedbackText').value = '';
    closeFeedback();
}
</script>

</body>
</html>
